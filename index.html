<!-- Dr. Impulse's Web Game Rule -->
<!-- Begin Game Style -->
<style>
    #Game {
        background: slateblue;
        width: 100%;
        height: 100%;
        position: fixed;
        display: grid;
        /* justify-content: center;
        align-items: center; */
        left: 0;
        top: 0;
        bottom: 0;
        right: 0;
        overflow-x: hidden;
        overflow-y: scroll;
        user-select: none;
    }

    #Game::-webkit-scrollbar {
        display: block;
        background: white;
    }
    #Game::-webkit-scrollbar-thumb {
        background: black;
    }
</style>
<!-- End Game Style -->

<!-- Start Game Building -->
<section::game id="Game" draggable="false" onContextMenu="return false" ondblclick="window.open('index.html', '_self')">
    <!-- Game Title -->
    <title>Tiling Puzzle By Ronaldo Excellent</title>

    <!-- Game Style -->
    <page::style />
        <style>
            #notification {
                background: rgb(255, 0, 221);
                width: 100%;
                padding: 1.3%;
                margin: 0 auto;
                position: relative;
                font-size: 1.7em;
                font-weight: 700;
                color: white;
            }

            #notification2 {
                background: rgba(245, 245, 245, 0.5);
                width: 100%;
                margin: 0 auto;
                position: relative;
                margin-bottom: 8px;
                text-align: center;
            }

            #showImage {
                font-size: 1.2em;
                font-weight: 700;
                color: white;
                text-shadow: 2px 2px 2px black;
                padding: 3%;
            }

            #full-image, #dark-transparent {
                position: fixed;
                display: flex;
                justify-content: center;
                align-items: center; 
                background: white;
                width: 100%;
                height: 100%;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                border-radius: 0;
                z-index: 100;
                overflow: scroll;
                transform: scale(0);
                transition: 1s;
            }

            #dark-transparent {
                z-index: 300;
                opacity: 0;
                background: black;
                transform: scale(1);
                overflow: hidden;
                display: none;
                transition: 2s;
            }

            #canvas, #second-row {
                background-color: white;
                display: grid;
                justify-content: center;
                align-items: center;
                overflow: hidden;
                position: relative;
                box-shadow: 3px 3px 3px grey;
                border-radius: 18px;
                padding: 3%;
                user-select: none;
                width: 100%;
            }

            @keyframes blink {
                from {
                    background: white;
                    color: #000000;
                }
                to {
                    background: #00dd00;
                    color: #ffffff;
                }
            }

            .row, .nxtrow {
                display: inline-flex;
                color: white;
                width: 100%;
                font-weight: bolder;
                margin: 0px auto;
            }

            @keyframes slide {
                from {
                    transform: translateX(0);
                }
                50% {
                    transform: translateX(20%);
                }
                75% {
                    transform: translateX(-20%);
                }
                to {
                    transform: translateX(0);
                }
            }

            .tile-block {
                border: 0;
                background: darkgrey;
                color: #00bf00;
                width: 100px;
                height: 100px;
                margin: 0px auto;
                cursor: pointer;
            }
               
            .tf {
                width: 100%;
                height: 100%;
                background: white;
                border: 0;
                animation: .7s slide_tiles;
            }
            @keyframes slide_tiles {
                from {
                    transform: translateY(-100%);
                }
                50% {
                    transform: translateY(170%);
                }
                to {
                    transform: translateY(100%);
                }
            }
        </style>
        <!-- End Style -->


    <page::content />
	<marquee style="font-family:Book Antiqua; bgcolor="#000080" loop="infinite"><a href="https://buymeacoffee.com/ronaldoexcel"><img alt="" style="width:100%;" border="0" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiExRYgdKcpf4FsWksX-JgTYO_Ni0AIcHXt5A2HtP22LFmqzGLi0LSRi67EY8uXWEXnIp2Ap7IWVJ-rVT76RXTzBW60nd08kk9u6QC_48KvUOUXE2weaT8oD7zZs2Z3fvHWuffEhUpMNKKWHxjd7ihK5b8SsbXZh8vUbig2uXgJVq6D9aYRQ0_14-B_/w498-h137/ad1buymecoffee.jpg" /></a></marquee>
        <br>
        <p id="notification" align="center">Drag & Drop!</p>
        <p id="notification2">
            <button id="showImage" onclick="document.getElementById('full-image').style.transform = 'scale(1)'">See Image</button>
        </p>
        <aside id="dark-transparent"></aside>

        <aside id="full-image">
            <button style="position: absolute; color:#fd0000; font-weight: bolder; text-shadow: 1px 1px 2px black; font-size: x-large; cursor: pointer; padding: 1%; top: 0; left: 0;" onclick="document.getElementById('full-image').style.transform = 'scale(0)'"> &times; Close </button>
            <img src="main.png" />
        </aside>

        <article class="row">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <section id="canvas">

                <section class="row row1">
                    <article class="tile-block">
                    </article>

                    <article class="tile-block">
                    </article>

                    <article class="tile-block">
                        <main class="tiles null"></main>
                    </article>

                    <article class="tile-block">
                        <main class="tiles null"></main>
                    </article>
                </section>

                <section class="row row2">
                    <article class="tile-block">
                        <main class="tiles null"></main>
                    </article>

                    <article class="tile-block">
                        <main class="tiles null"></main>
                    </article>

                    <article class="tile-block">
                        <main class="tiles null"></main>
                    </article>

                    <article class="tile-block">
                        <main class="tiles null"></main>
                    </article>
                </section>

                <section class="row row1">
                    <article class="tile-block">
                        <main class="tiles null"></main>
                    </article>

                    <article class="tile-block">
                        <main class="tiles null"></main>
                    </article>

                    <article class="tile-block">
                        <main class="tiles null"></main>
                    </article>

                    <article class="tile-block">
                        <main class="tiles null"></main>
                    </article>
                </section>

                <section class="row row2">
                    <article class="tile-block">
                        <main class="tiles null"></main>
                    </article>

                    <article class="tile-block">
                        <main class="tiles null"></main>
                    </article>

                    <article class="tile-block">
                        <main class="tiles null"></main>
                    </article>

                    <article class="tile-block">
                        <main class="tiles null"></main>
                    </article>
                </section>

            </section>
            &nbsp;&nbsp;&nbsp;
            <hr />
            &nbsp;&nbsp;&nbsp;
            <section id="second-row">
                <main class="nxtrow">
                    <div class="tile-block TB"></div>

                    <div class="tile-block TB"></div>

                    <div class="tile-block TB"></div>

                    <div class="tile-block TB"></div>
                </main>

                <main class="nxtrow">
                    <div class="tile-block TB"></div>

                    <div class="tile-block TB"></div>

                    <div class="tile-block TB"></div>

                    <div class="tile-block TB"></div>
                </main>

                <main class="nxtrow">
                    <div class="tile-block TB"></div>

                    <div class="tile-block TB"></div>

                    <div class="tile-block TB"></div>

                    <div class="tile-block TB"></div>
                </main>

                <main class="nxtrow">
                    <div class="tile-block TB"></div>

                    <div class="tile-block TB"></div>

                    <div class="tile-block TB"></div>

                    <div class="tile-block TB"></div>
                </main>
            </section>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </article>

        <!-- End Main -->

    <page::engine />
        <script>
            try {
                start();
                
                function start() {
                    $cnv = document.getElementById('Game');
                    $t = document.getElementsByClassName('tiles');
                    $tb = document.getElementsByClassName('tile-block');
                    $d = document.getElementById('notification');
                    $dt = document.getElementById('dark-transparent');
                    $tF = [document.getElementById('takeFrom1'), document.getElementById('takeFrom2'), document.getElementById('takeFrom3'), document.getElementById('takeFrom4'), document.getElementById('takeFrom5'), document.getElementById('takeFrom6'), document.getElementById('takeFrom7'), document.getElementById('takeFrom8'), document.getElementById('takeFrom9'), document.getElementById('takeFrom10'), document.getElementById('takeFrom11'), document.getElementById('takeFrom12'), document.getElementById('takeFrom13'), document.getElementById('takeFrom14'), document.getElementById('takeFrom15'), document.getElementById('takeFrom16')];
                    $rw1 = document.getElementsByClassName('row1');
                    $rw2 = document.getElementsByClassName('row2');
                    $tile_bank = ["<img draggable='false' src='001.png' id='takeFrom1' class='tf' />", "<img draggable='false' src='002.png' id='takeFrom2' class='tf' />", "<img draggable='false' src='003.png' id='takeFrom3' class='tf' />", "<img draggable='false' src='004.png' id='takeFrom4' class='tf' />", "<img draggable='false' src='005.png' id='takeFrom5' class='tf' />", "<img draggable='false' src='006.png' id='takeFrom6' class='tf' />", "<img draggable='false' src='007.png' id='takeFrom7' class='tf' />", "<img draggable='false' src='008.png' id='takeFrom8' class='tf' />", "<img draggable='false' src='009.png' id='takeFrom9' class='tf' />", "<img draggable='false' src='010.png' id='takeFrom10' class='tf' />", "<img draggable='false' src='011.png' id='takeFrom11' class='tf' />", "<img draggable='false' src='012.png' id='takeFrom12' class='tf' />", "<img draggable='false' src='013.png' id='takeFrom13' class='tf' />", "<img draggable='false' src='014.png' id='takeFrom14' class='tf' />", "<img draggable='false' src='015.png' id='takeFrom15' class='tf' />", "<img draggable='false' src='016.png' id='takeFrom16' class='tf' />"];
                    _T = document.getElementsByClassName('tf');
                    _TB = document.getElementsByClassName('TB');
                    alert('Javascript Support Confirmed');
                    $cnv.draggable = false;
                    
                    // autorun shuffle
                    $start__shuffle = setInterval(function () {_shuffle();}, 500);

                    // add equal features to all tiles
                    for ($all = 0; $all < $tb.length; $all++) {
                        $tb[$all].draggable = true;
                        $tb[$all].ondragstart = function () {draggable(event)};
                        $tb[$all].ondrag = function () {storeData(event); whileDrag()};
                        $tb[$all].ondragend = function () {finish(event)};
                        $tb[$all].ondragover = function () {unlock(event)};
                        $tb[$all].ondragenter = function () {receive(event)};
                        $tb[$all].ondrop = function () {accept(event)};
                        $tb[$all].ondragleave = function () {end(event)};
                    }

                    // shuffle
                    function _shuffle() {
                        $sh1 = Math.floor(Math.random() * _TB.length);
                        $tiba = $tile_bank.sort();
                        $sh2 = Math.floor(Math.random() * $tiba.length);
                        _TB[$sh1].innerHTML = $tile_bank[$sh2];
                        _TB[$sh1].className = "tile-block";
                        $tile_bank.splice($tile_bank.indexOf($tile_bank[$sh2]), 1);

                        (!$tile_bank.length > 0) ? clearInterval($start__shuffle) : null;
                    } 

                    // drag
                    function storeData(event) {
                        $remnant = event.target.innerHTML;
                        sessionStorage.setItem('data', $remnant);
                    }

                    // dragstart
                    function draggable(event) {
				    (event.target.innerHTML == "") ? $remnant = "" :
                        event.target.style.outline = "";
                    }

                    // drag
                    function whileDrag() {
                        $d.innerHTML = 'Dragging...';
                        $d.style.background = "red";
                    }
                    
                    // dragend
                    function finish(event) {
                        $d.innerHTML = 'Drag & Drop!';
                        $d.style.background = "rgb(255, 0, 221)";
                        $rev = sessionStorage.getItem('reverse');
                        
                        ($rev == "") ? event.target.innerHTML = event.target.innerHTML : event.target.innerHTML = $rev;
                    }

                    // dragover
                    function unlock(event) {
				   (sessionStorage.getItem('data') == "" && event.target.innerHTML !== "") ? null :
                        event.preventDefault();
				   $d.innerHTML = 'Dropped.';
                        $d.style.background = "green";
                        $reverse_Data = event.target.innerHTML;
                        sessionStorage.setItem('reverse', $reverse_Data);
                    }

                    // dragenter
                    function receive(event) {
                        event.target.style.outline = "thick ridge";
                    }

                    // drop
                    function accept(event) {
                        $data = sessionStorage.getItem('data');
                        event.target.innerHTML = $data;
                        event.target.style.outline = ""; 

                        function win() {
                            for (i = 0; i < $rw1.length; i++) {
                                $rw1[i].style.animation = 'slide 2s';
                                $rw2[i].style.animation = 'slide 2s reverse';
                                $d.style.animation = "blink .2s infinite";
                                $d.innerHTML = "<i>You Win!</i>";
                                setTimeout(function () {$dt.style.display = 'block';}, 2000);
                                setTimeout(function () {$d.style.transition = '1.5s'; $d.style.zIndex = '400'; $d.style.position = 'fixed'; $d.style.marginTop = '200px'; $dt.style.opacity = '0.7'}, 3000)
                            }
                        }
                        
                        if ($tb[0].children[0].id == "takeFrom1" && $tb[1].children[0].id == "takeFrom2" && $tb[2].children[0].id == "takeFrom3" && $tb[3].children[0].id == "takeFrom4" && $tb[4].children[0].id == "takeFrom5" && $tb[5].children[0].id == "takeFrom6" && $tb[6].children[0].id == "takeFrom7" && $tb[7].children[0].id == "takeFrom8" && $tb[8].children[0].id == "takeFrom9" && $tb[9].children[0].id == "takeFrom10" && $tb[10].children[0].id == "takeFrom11" && $tb[11].children[0].id == "takeFrom12" && $tb[12].children[0].id == "takeFrom13" && $tb[13].children[0].id == "takeFrom14" && $tb[14].children[0].id == "takeFrom15" && $tb[15].children[0].id == "takeFrom16") {
                            $cnv.disabled = true;
                            setTimeout(function () {win()}, 700);
                        }
                    }

                    // dragleave
                    function end(event) {
                        event.preventDefault();
                        event.target.style.outline = "";
                        sessionStorage.clear();
                    }
                }
            }

            catch (error) {
                console.log(error)
            }
        </script>
        <!-- End Engine Code -->

</section::game>
<!-- Finish Game Building -->
